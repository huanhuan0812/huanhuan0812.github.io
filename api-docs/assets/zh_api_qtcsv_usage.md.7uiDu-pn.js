import{_ as d,o as e,c as a,ae as s}from"./chunks/framework.B3WmzCCM.js";const k=JSON.parse('{"title":"使用方法","description":"","frontmatter":{"title":"使用方法","order":2},"headers":[],"relativePath":"zh/api/qtcsv/usage.md","filePath":"zh/api/qtcsv/usage.md"}'),o={name:"zh/api/qtcsv/usage.md"};function i(n,t,r,c,l,h){return e(),a("div",null,[...t[0]||(t[0]=[s(`<h3 id="要求" tabindex="-1">要求 <a class="header-anchor" href="#要求" aria-label="Permalink to &quot;要求&quot;">​</a></h3><ol><li>Qt 6.0+</li><li>c++17+</li></ol><h2 id="_1-安装" tabindex="-1">1.安装 <a class="header-anchor" href="#_1-安装" aria-label="Permalink to &quot;1.安装&quot;">​</a></h2><ul><li><h3 id="cmake" tabindex="-1">CMake <a class="header-anchor" href="#cmake" aria-label="Permalink to &quot;CMake&quot;">​</a></h3><ul><li><strong>1.直接使用</strong><br> 在文件中直接添加：<div class="language-cmake vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">cmake</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SOURCES</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    QCsv.cpp</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 设置头文件目录</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(HEADERS</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    QCsv.hpp</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 添加可执行文件</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">add_executable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(myapp </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">\${SOURCES}</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> \${HEADERS}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></li><li><strong>2.安装到目录</strong><br><a href="./install.html">安装方法</a></li></ul></li><li><h3 id="qmake" tabindex="-1">qmake <a class="header-anchor" href="#qmake" aria-label="Permalink to &quot;qmake&quot;">​</a></h3><p>添加</p><div class="language-prolog vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">prolog</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># 添加头文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">HEADERS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> += </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">QCsv</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">hpp</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># 添加源文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SOURCES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> += </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">QCsv</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">cpp</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul><h2 id="_2-使用" tabindex="-1">2.使用 <a class="header-anchor" href="#_2-使用" aria-label="Permalink to &quot;2.使用&quot;">​</a></h2><h3 id="_1-构造" tabindex="-1">1.构造 <a class="header-anchor" href="#_1-构造" aria-label="Permalink to &quot;1.构造&quot;">​</a></h3><div class="language-cpp vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    QCsv</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> csv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">QString</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> filePath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> //禁止使用 QCsv csv; （未打开文件的csv对象）</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //或者</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    QCsv</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> csv2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">csv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> //移动构造，禁用拷贝</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_2-文件操作" tabindex="-1">2.文件操作 <a class="header-anchor" href="#_2-文件操作" aria-label="Permalink to &quot;2.文件操作&quot;">​</a></h3><table tabindex="0"><thead><tr><th>方法</th><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td><code>open(const QString&amp; filePath)</code></td><td><code>void</code></td><td>打开指定路径的文件</td></tr><tr><td><code>close()</code></td><td><code>void</code></td><td>关闭当前文件</td></tr><tr><td><code>isOpen()</code></td><td><code>bool</code></td><td>检查文件是否已打开</td></tr><tr><td><code>load()</code></td><td><code>void</code></td><td>加载文件内容</td></tr><tr><td><code>save()</code></td><td><code>bool</code></td><td>保存数据到当前文件</td></tr><tr><td><code>saveAs(const QString&amp; filePath)</code></td><td><code>bool</code></td><td>另存为指定文件</td></tr><tr><td><code>atomicSave()</code></td><td><code>bool</code></td><td>原子保存（防止数据损坏）</td></tr><tr><td><code>atomicSaveAs(const QString&amp; filePath)</code></td><td><code>bool</code></td><td>原子另存为</td></tr><tr><td><code>sync()</code></td><td><code>QFuture&lt;bool&gt;</code></td><td>异步同步数据到磁盘</td></tr><tr><td><code>finalize()</code></td><td><code>void</code></td><td>保存并关闭文件</td></tr></tbody></table><h3 id="_3-数据访问" tabindex="-1">3.数据访问 <a class="header-anchor" href="#_3-数据访问" aria-label="Permalink to &quot;3.数据访问&quot;">​</a></h3><table tabindex="0"><thead><tr><th>方法</th><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td><code>getValue(const QString&amp; key) const</code></td><td><code>QString</code></td><td>获取指定键的值（键格式如 &quot;R1C1&quot;）</td></tr><tr><td><code>tryGetValue(const QString&amp; key) const</code></td><td><code>std::optional&lt;QString&gt;</code></td><td>尝试获取值，失败返回空</td></tr><tr><td><code>setValue(const QString&amp; key, const QString&amp; value)</code></td><td><code>void</code></td><td>设置指定单元格的值</td></tr><tr><td><code>contains(const QString&amp; key) const</code></td><td><code>bool</code></td><td>检查单元格是否存在</td></tr><tr><td><code>keys() const</code></td><td><code>QList&lt;QString&gt;</code></td><td>获取所有单元格键</td></tr><tr><td><code>size() const</code></td><td><code>int</code></td><td>获取单元格总数</td></tr><tr><td><code>isEmpty() const</code></td><td><code>bool</code></td><td>检查数据是否为空</td></tr></tbody></table><h3 id="_4-批量操作" tabindex="-1">4.批量操作 <a class="header-anchor" href="#_4-批量操作" aria-label="Permalink to &quot;4.批量操作&quot;">​</a></h3><table tabindex="0"><thead><tr><th>方法</th><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td><code>setValues(const QHash&lt;QString, QString&gt;&amp; values)</code></td><td><code>void</code></td><td>批量设置多个单元格</td></tr><tr><td><code>getAllValues() const</code></td><td><code>QHash&lt;QString, QString&gt;</code></td><td>获取所有数据</td></tr></tbody></table><h3 id="_5-搜索功能" tabindex="-1">5.搜索功能 <a class="header-anchor" href="#_5-搜索功能" aria-label="Permalink to &quot;5.搜索功能&quot;">​</a></h3><table tabindex="0"><thead><tr><th>方法</th><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td><code>search(const QString&amp; value) const</code></td><td><code>QList&lt;QString&gt;</code></td><td>搜索包含指定值的所有单元格键</td></tr><tr><td><code>searchByPrefix(const QString&amp; prefix) const</code></td><td><code>QList&lt;QString&gt;</code></td><td>搜索键以指定前缀开头的单元格</td></tr></tbody></table><h3 id="_6-属性设置" tabindex="-1">6.属性设置 <a class="header-anchor" href="#_6-属性设置" aria-label="Permalink to &quot;6.属性设置&quot;">​</a></h3><table tabindex="0"><thead><tr><th>方法</th><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td><code>setSeparator(char sep)</code></td><td><code>void</code></td><td>设置CSV分隔符</td></tr><tr><td><code>getSeparator() const</code></td><td><code>char</code></td><td>获取当前分隔符</td></tr><tr><td><code>setFilePath(const QString&amp; path)</code></td><td><code>void</code></td><td>设置文件路径</td></tr><tr><td><code>getFilePath() const</code></td><td><code>QString</code></td><td>获取当前文件路径</td></tr><tr><td><code>clear()</code></td><td><code>void</code></td><td>清空所有数据</td></tr></tbody></table><h3 id="_7-元数据" tabindex="-1">7.元数据 <a class="header-anchor" href="#_7-元数据" aria-label="Permalink to &quot;7.元数据&quot;">​</a></h3><table tabindex="0"><thead><tr><th>方法</th><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td><code>getRowCount() const</code></td><td><code>int</code></td><td>获取最大行号</td></tr><tr><td><code>getColumnCount() const</code></td><td><code>int</code></td><td>获取最大列号</td></tr><tr><td><code>getLastModified() const</code></td><td><code>QDateTime</code></td><td>获取文件的最后修改时间</td></tr><tr><td><code>getFileSize() const</code></td><td><code>qint64</code></td><td>获取文件大小（字节）</td></tr><tr><td><code>getAllMetadata() const</code></td><td><code>QMap&lt;QString, QVariant&gt;</code></td><td>获取所有文件元数据</td></tr></tbody></table><h3 id="_8-流式读取" tabindex="-1">8.流式读取 <a class="header-anchor" href="#_8-流式读取" aria-label="Permalink to &quot;8.流式读取&quot;">​</a></h3><table tabindex="0"><thead><tr><th>方法</th><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td><code>operator&gt;&gt;(QCsv&amp; csv, QString&amp; value)</code></td><td><code>QCsv&amp;</code></td><td>流式读取下一个值</td></tr><tr><td><code>resetStream()</code></td><td><code>void</code></td><td>重置流读取位置</td></tr><tr><td><code>hasNext()</code></td><td><code>bool</code></td><td>判断是否到达文件末尾</td></tr></tbody></table><h3 id="_9-行、列名称处理" tabindex="-1">9.行、列名称处理 <a class="header-anchor" href="#_9-行、列名称处理" aria-label="Permalink to &quot;9.行、列名称处理&quot;">​</a></h3><table tabindex="0"><thead><tr><th>方法</th><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td><code>enableHeaders(bool enable)</code></td><td><code>void</code></td><td>启用或禁用行/列表头</td></tr><tr><td><code>headersEnabled() const</code></td><td><code>bool</code></td><td>检查是否启用了表头</td></tr><tr><td><strong>列标题</strong></td><td>-</td><td>-</td></tr><tr><td><code>setHeaderRow(int row=1)</code></td><td><code>void</code></td><td>设置作为列标题的行号</td></tr><tr><td><code>setColumnHeader(int col, const QString&amp; header)</code></td><td><code>void</code></td><td>设置指定列的标题</td></tr><tr><td><code>setColumnHeaders(const QHash&lt;int, QString&gt;&amp; headers)</code></td><td><code>void</code></td><td>批量设置列标题</td></tr><tr><td><code>searchColumnHeader(const QString&amp; header) const</code></td><td><code>QList&lt;int&gt;</code></td><td>搜索包含指定标题的列号</td></tr><tr><td><code>getColumnHeader(int col) const</code></td><td><code>QString</code></td><td>获取指定列的标题</td></tr><tr><td><code>getColumnHeaders() const</code></td><td><code>QList&lt;QString&gt;</code></td><td>获取所有列标题（按列号顺序）</td></tr><tr><td><code>getColumnHeaderLists() const</code></td><td><code>QStringList</code></td><td>获取所有列标题列表</td></tr><tr><td><code>getHeaderRow() const</code></td><td><code>int</code></td><td>获取当前作为列标题的行号</td></tr><tr><td><strong>行标题</strong></td><td>-</td><td>-</td></tr><tr><td><code>setHeaderColumn(int col=1)</code></td><td><code>void</code></td><td>设置作为行标题的列号</td></tr><tr><td><code>setRowHeader(int row, const QString&amp; header)</code></td><td><code>void</code></td><td>设置指定行的标题</td></tr><tr><td><code>setRowHeaders(const QHash&lt;int, QString&gt;&amp; headers)</code></td><td><code>void</code></td><td>批量设置行标题</td></tr><tr><td><code>searchRowHeader(const QString&amp; header) const</code></td><td><code>QList&lt;int&gt;</code></td><td>搜索包含指定标题的行号</td></tr><tr><td><code>getRowHeader(int row) const</code></td><td><code>QString</code></td><td>获取指定行的标题</td></tr><tr><td><code>getRowHeaders() const</code></td><td><code>QList&lt;QString&gt;</code></td><td>获取所有行标题（按行号顺序）</td></tr><tr><td><code>getRowHeaderLists() const</code></td><td><code>QStringList</code></td><td>获取所有行标题列表</td></tr><tr><td><code>getHeaderCol() const</code></td><td><code>int</code></td><td>获取当前作为行标题的列号</td></tr></tbody></table><h3 id="_10-类型判断与转换" tabindex="-1">10.类型判断与转换 <a class="header-anchor" href="#_10-类型判断与转换" aria-label="Permalink to &quot;10.类型判断与转换&quot;">​</a></h3><table tabindex="0"><thead><tr><th>方法</th><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td><code>isNumeric(const QString&amp; value) const</code></td><td><code>bool</code></td><td>判断值是否为数值类型</td></tr><tr><td><code>isDate(const QString&amp; value, const QString&amp; format = &quot;yyyy-MM-dd&quot;) const</code></td><td><code>bool</code></td><td>判断值是否为指定格式的日期</td></tr><tr><td><code>isBoolean(const QString&amp; value) const</code></td><td><code>bool</code></td><td>判断值是否为布尔类型（true/false）</td></tr><tr><td><code>toDouble(const QString&amp; value) const</code></td><td><code>std::optional&lt;double&gt;</code></td><td>将值转换为浮点数，失败返回空</td></tr><tr><td><code>toDate(const QString&amp; value, const QString&amp; format = &quot;yyyy-MM-dd&quot;) const</code></td><td><code>std::optional&lt;QDate&gt;</code></td><td>将值转换为日期，失败返回空</td></tr><tr><td><code>toBoolean(const QString&amp; value) const</code></td><td><code>std::optional&lt;bool&gt;</code></td><td>将值转换为布尔值，失败返回空</td></tr></tbody></table><h3 id="_11-信号" tabindex="-1">11.信号 <a class="header-anchor" href="#_11-信号" aria-label="Permalink to &quot;11.信号&quot;">​</a></h3><table tabindex="0"><thead><tr><th>信号</th><th>参数</th><th>描述</th></tr></thead><tbody><tr><td><code>dataChanged</code></td><td><code>const QString&amp; key, const QString&amp; oldValue, const QString&amp; newValue</code></td><td>当单元格数据发生变化时发出，包含键、旧值和新值</td></tr><tr><td><code>fileOpened</code></td><td><code>const QString&amp; filePath</code></td><td>文件成功打开时发出</td></tr><tr><td><code>fileClosed</code></td><td>无参数</td><td>文件关闭时发出</td></tr><tr><td><code>fileSaved</code></td><td><code>const QString&amp; filePath</code></td><td>文件成功保存时发出</td></tr><tr><td><code>error</code></td><td><code>const QString&amp; errorString</code></td><td>发生错误时发出，包含错误信息</td></tr></tbody></table><p>这些信号可以用于监控 <code>QCsv</code> 对象的状态变化和操作结果，便于在 UI 层进行相应的反馈和处理。</p><h2 id="_3-源代码" tabindex="-1">3.源代码 <a class="header-anchor" href="#_3-源代码" aria-label="Permalink to &quot;3.源代码&quot;">​</a></h2><p><a href="https://github.com/huanhuan0812/qtcsv/blob/main/tests/test.cpp" target="_blank" rel="noreferrer">源代码</a> [file content end]</p>`,30)])])}const b=d(o,[["render",i]]);export{k as __pageData,b as default};
